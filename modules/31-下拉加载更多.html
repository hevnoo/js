<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .van-list {
        height: 300px;
        overflow-y: scroll;
        /* border: 1px solid gray; */
      }
    </style>
  </head>
  <body>
    <!-- style="height: 300px; overflow-y: scroll" -->
    <div id="listContainer" class="van-list">
      <div>第 1 条数据</div>
      <div>第 2 条数据</div>
      <div>第 3 条数据</div>
      <div>第 4 条数据</div>
      <div>第 5 条数据</div>
      <div>第 6 条数据</div>
      <div>第 7 条数据</div>
      <div>第 8 条数据</div>
      <div>第 9 条数据</div>
      <div>第 10 条数据</div>
      <div>第 1 条数据</div>
      <div>第 2 条数据</div>
      <div>第 3 条数据</div>
      <div>第 4 条数据</div>
      <div>第 5 条数据</div>
      <div>第 6 条数据</div>
      <div>第 7 条数据</div>
      <div>第 8 条数据</div>
      <div>第 9 条数据</div>
      <div>第 10 条数据</div>
    </div>

    <script>
      const listContainer = document.getElementsByClassName("van-list")[0];
      //   const listContainer = document.getElementById("listContainer");
      console.log("listContainer", listContainer);
      let isLoadingMore = false;

      listContainer.addEventListener("scroll", function () {
        const scrollTop = listContainer.scrollTop;
        const clientHeight = listContainer.clientHeight;
        const scrollHeight = listContainer.scrollHeight;

        if (scrollTop + clientHeight >= scrollHeight && !isLoadingMore) {
          loadMore();
        }
      });

      function loadMore() {
        isLoadingMore = true;

        // 模拟一个 AJAX 请求，获取新数据
        setTimeout(function () {
          const newData = [
            "第 11 条数据",
            "第 12 条数据",
            "第 13 条数据",
            "第 14 条数据",
            "第 15 条数据",
            "第 16 条数据",
            "第 17 条数据",
            "第 18 条数据",
            "第 19 条数据",
            "第 20 条数据",
          ];

          newData.forEach(function (item) {
            const listItem = document.createElement("div");
            listItem.innerText = item;
            listContainer.appendChild(listItem);
          });

          isLoadingMore = false;
        }, 1000);
      }
    </script>
  </body>
</html>
